{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"fastapi-dbbackup","text":"<p>Database-native backup tool for FastAPI and SQLAlchemy. Similar to <code>django-dbbackup</code>.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Database Support: SQLite, PostgreSQL, MySQL.</li> <li>Storage Support: Local File System, AWS S3, DigitalOcean Spaces.</li> <li>Direct Streaming: Direct pipe from database to cloud for Postgres/MySQL (No local disk usage).</li> <li>Compression: Gzip compression supported (including streaming compression).</li> <li>Security: Secure credential handling via environment variables (no passwords in process lists).</li> <li>Restoration: Easy database restoration from backups.</li> <li>Retention: Automatic purging of old backups.</li> <li>CLI: Intuitive CLI with <code>backup</code>, <code>restore</code>, and <code>list</code> commands.</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li> <p>Install:    <pre><code>pip install fastapi-dbbackup\n</code></pre></p> </li> <li> <p>Configure: Create a <code>.env</code> file:    <pre><code>DATABASE_URL=postgresql://user:pass@localhost:5432/dbname\nDBBACKUP_STORAGE=s3\nAWS_STORAGE_BUCKET_NAME=my-backups\n</code></pre></p> </li> <li> <p>Backup:    <pre><code>fastapi-dbbackup backup\n</code></pre></p> </li> </ol>"},{"location":"#docker-usage","title":"Docker Usage","text":"<p><code>fastapi-dbbackup</code> works great with Docker. Ensure your container has the appropriate database CLI tools installed.</p>"},{"location":"#example-dockerfile","title":"Example Dockerfile","text":"<pre><code>FROM python:3.11-slim\n\n# Install database clients (Postgres/MySQL)\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    postgresql-client \\\n    default-mysql-client \\\n    sqlite3 \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\nWORKDIR /app\nCOPY . .\nRUN pip install fastapi-dbbackup\n\nCMD [\"fastapi-dbbackup\", \"backup\"]\n</code></pre>"},{"location":"cli/","title":"CLI Reference","text":"<p>The main command is <code>fastapi-dbbackup</code>.</p>"},{"location":"cli/#commands","title":"Commands","text":""},{"location":"cli/#backup","title":"<code>backup</code>","text":"<p>Creates a backup of the configured database and uploads it to the configured storage.</p> <pre><code>fastapi-dbbackup backup\n</code></pre>"},{"location":"cli/#restore","title":"<code>restore</code>","text":"<p>Restores the database from a backup file.</p> <ul> <li>Latest Backup: If no filename is provided, the latest backup from storage is used.</li> <li>Specific Backup: Pass the filename as an argument.</li> </ul> <pre><code># Restore latest\nfastapi-dbbackup restore\n\n# Restore specific\nfastapi-dbbackup restore default-20260131-220000.dump.gz\n</code></pre>"},{"location":"cli/#list","title":"<code>list</code>","text":"<p>Lists all available backups in the configured storage.</p> <pre><code>fastapi-dbbackup list\n</code></pre>"},{"location":"configuration/","title":"Configuration","text":"<p><code>fastapi-dbbackup</code> is configuration-driven via environment variables.</p>"},{"location":"configuration/#local-setup","title":"Local Setup","text":"<p>To store backups on your local machine or server, use the following minimal configuration:</p> <pre><code>DATABASE_URL=postgresql://user:pass@localhost:5432/dbname\nDBBACKUP_STORAGE=local\n# Optional: customize where backups are saved (default: backups/)\nDBBACKUP_DIR=my_local_backups\n</code></pre>"},{"location":"configuration/#cloud-setup-s3-digitalocean","title":"Cloud Setup (S3 / DigitalOcean)","text":"<p>To store backups in the cloud (AWS S3 or DigitalOcean Spaces), use the following configuration:</p> <pre><code>DATABASE_URL=postgresql://user:pass@localhost:5432/dbname\nDBBACKUP_STORAGE=s3\nAWS_STORAGE_BUCKET_NAME=your-bucket-name\n\n# Authentication\nAWS_S3_ACCESS_KEY_ID=your-access-key\nAWS_S3_SECRET_ACCESS_KEY=your-secret-key\n\n# Required for DigitalOcean Spaces or custom S3 providers\nAWS_S3_ENDPOINT_URL=https://nyc3.digitaloceanspaces.com\nAWS_S3_REGION=nyc3\n\n# Optional: customize the folder/prefix in the bucket\nDBBACKUP_DIR=production_backups\n</code></pre>"},{"location":"configuration/#environment-variables-reference","title":"Environment Variables Reference","text":"Variable Description Default <code>DATABASE_URL</code> SQLAlchemy-style URL. Required for connection details. Credentials and host are optional if your environment supports it (e.g. Trust auth). - <code>DBBACKUP_ENGINE</code> Explicit engine selection (<code>postgres</code>, <code>mysql</code>, <code>sqlite</code>, or <code>auto</code>) <code>auto</code> <code>DBBACKUP_DIR</code> Local directory for backups or S3 Prefix <code>backups</code> <code>DBBACKUP_STORAGE</code> Storage backend (<code>local</code> or <code>s3</code>) <code>local</code> <code>DBBACKUP_COMPRESS</code> Enable Gzip compression <code>true</code> <code>DBBACKUP_RETENTION_DAYS</code> Number of days to keep backups (0 = forever) <code>0</code> <code>DBBACKUP_MAX_BACKUPS</code> Maximum number of backups to keep (0 = unlimited) <code>0</code>"},{"location":"configuration/#s3-digitalocean-specifics","title":"S3 / DigitalOcean Specifics","text":"Variable Description <code>AWS_S3_ACCESS_KEY_ID</code> Your access key ID <code>AWS_S3_SECRET_ACCESS_KEY</code> Your secret access key <code>AWS_S3_ENDPOINT_URL</code> Custom endpoint (Required for DigitalOcean Spaces) <code>AWS_S3_REGION</code> S3 region (e.g., <code>us-east-1</code> or <code>nyc3</code>) <code>AWS_STORAGE_BUCKET_NAME</code> Bucket or Space name <code>AWS_S3_DEFAULT_ACL</code> File ACL (<code>private</code> or <code>public-read</code>)"},{"location":"configuration/#using-a-env-file","title":"Using a .env File","text":"<p>The tool automatically searches for a <code>.env</code> file in the current directory and parent directories.</p> <pre><code># Example .env\nDATABASE_URL=sqlite:///./test.db\nDBBACKUP_STORAGE=local\nDBBACKUP_RETENTION_DAYS=7\n</code></pre>"},{"location":"engines/","title":"Database Engines","text":"<p><code>fastapi-dbbackup</code> supports PostgreSQL, MySQL, and SQLite.</p>"},{"location":"engines/#postgresql","title":"PostgreSQL","text":"<ul> <li>Tool: Uses <code>pg_dump</code> and <code>pg_restore</code>.</li> <li>Format: Custom archive format (<code>-Fc</code>) by default.</li> <li>Streaming: Supported for backups.</li> <li>Security: Uses <code>PGPASSWORD</code> environment variable.</li> <li>Robustness: Dynamic argument building handles missing host/credentials (supports Trust auth).</li> </ul>"},{"location":"engines/#mysql","title":"MySQL","text":"<ul> <li>Tool: Uses <code>mysqldump</code> and <code>mysql</code>.</li> <li>Format: Standard SQL dump.</li> <li>Streaming: Supported for backups.</li> <li>Security: Uses <code>MYSQL_PWD</code> environment variable.</li> <li>Robustness: Dynamic argument building handles missing host/credentials (supports Trust auth).</li> </ul>"},{"location":"engines/#sqlite","title":"SQLite","text":"<ul> <li>Tool: Uses <code>sqlite3</code> CLI or Python <code>sqlite3.backup</code> API fallback.</li> <li>Streaming: Not supported (file-based only).</li> <li>Cleanup: Temporary local files are automatically deleted after cloud upload.</li> </ul>"},{"location":"installation/","title":"Installation","text":"<p><code>fastapi-dbbackup</code> can be installed via pip, poetry, or uv.</p>"},{"location":"installation/#standard-installation","title":"Standard Installation","text":"<pre><code>pip install fastapi-dbbackup\n</code></pre>"},{"location":"installation/#using-with-uv-recommended","title":"Using with uv (Recommended)","text":"<pre><code>uv add fastapi-dbbackup\n</code></pre>"},{"location":"installation/#os-compatibility","title":"OS Compatibility","text":"<ul> <li>Linux: Fully supported (Ubuntu, Debian, CentOS, etc.)</li> <li>Windows: Fully supported. Ensure database CLI tools are in your PATH.</li> <li>Docker: Supported. See Docker Guide for details.</li> </ul>"},{"location":"installation/#dependencies","title":"Dependencies","text":"<ul> <li>SQLAlchemy: Used for database detection and URL parsing.</li> <li>Boto3: Required for S3/DigitalOcean cloud storage.</li> <li>Python-Dotenv: Automatically loads your <code>.env</code> configuration.</li> </ul>"},{"location":"storage/","title":"Storage Backends","text":"<p><code>fastapi-dbbackup</code> supports both local and cloud-based storage.</p>"},{"location":"storage/#local-storage","title":"Local Storage","text":"<p>By default, backups are stored in the local file system.</p> <ul> <li>Directory: Set via <code>DBBACKUP_DIR</code>.</li> <li>Cleanup: Automatic retention and max backup limits apply locally.</li> </ul>"},{"location":"storage/#s3-compatible-storage","title":"S3-Compatible Storage","text":"<p>Support for AWS S3 and S3-compatible services like DigitalOcean Spaces.</p>"},{"location":"storage/#direct-streaming","title":"Direct Streaming","text":"<p>For Postgres and MySQL, the tool uses streaming uploads. This means data is piped directly from the database tool to the cloud without ever touching your local disk.</p> <ul> <li>Reliability: Uses S3 multipart uploads for large files.</li> <li>Integrity: Each chunk is verified via checksums.</li> <li>Efficiency: Zero temporary disk I/O.</li> </ul>"},{"location":"storage/#configuration-example","title":"Configuration Example","text":"<p>To use DigitalOcean Spaces:</p> <pre><code>DBBACKUP_STORAGE=s3\nAWS_S3_ENDPOINT_URL=https://nyc3.digitaloceanspaces.com\nAWS_S3_REGION=nyc3\nAWS_STORAGE_BUCKET_NAME=my-space-name\nAWS_S3_ACCESS_KEY_ID=your-key\nAWS_S3_SECRET_ACCESS_KEY=your-secret\n</code></pre>"}]}